extension:
  name: boilstream
  description: Mounts boilstream server as a secure Remote Secrets Storage
  version: 0.2.0
  language: C++
  build: cmake
  license: MIT
  maintainers:
    - dforsber

repo:
  github: dforsber/boilstream-extension
  ref: 47fb5a0ef6853d2314be11224d672e7af05168aa

docs:
  hello_world: |
    INSTALL httpfs; LOAD httpfs; INSTALL boilstream FROM community; LOAD boilstream;
    PRAGMA duckdb_secrets_boilstream_endpoint('https://localhost:443/secrets:ffe14a..71db4ef9fad837bc8');
    SELECT * FROM duckdb_secrets(); -- Fetches secrets from remote host
  extended_description: |
    This extension implements secure remote secrets storage on compatible REST API endpoints. It uses a one-time short lived bootstrap token provided through PRAGMA and runs PKCE token exchange for longer living session token with refreshing.
    Required REST API on the server endpoint: https://github.com/dforsber/boilstream-extension/blob/main/src/README.md
    As an example with boilstream server provided REST API:
    - Download and run boilstream server, go to https://your-server/, register user with MFA
    - INSTALL httpfs; LOAD httpfs; INSTALL boilstream FROM community; LOAD boilstream;
    - Vend web token and pass it along with the PRAGMA duckdb_secrets_boilstream_endpoint('https://your-server/secrets:TOKEN')
    - FROM duckdb_secrets();
